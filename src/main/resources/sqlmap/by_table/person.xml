<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="ren.sing.dao.table">

	<insert id="person_insert" parameterClass="com.sing.ren.pojo.Person">
		<![CDATA[
			INSERT INTO PERSON (
				person_id,
				virtual_account,
				name,
				nickname,
				balance,
				id_number,
				sex,
				birthday,
				local_calls,
				phone,
				email,
				skype,
				career,
				recipient,
				rec_add,
				rec_num,
				company_tax_id,
				updater,
				update_time
			) VALUES (
				#personId#,
				#virtualAccount#,
				#name#,
				#nickname#,
				#balance#,
				#idNumber#,
				#sex#,
				#birthday#,
				#localCalls#,
				#phone#,
				#email#,
				#skype#,
				#career#,
				#recipient#,
				#recAdd#,
				#recNum#,
				#companyTaxId#,
				#updater#,
				#updateTime#
			)
		]]>
	</insert>
	
	<select id="person_query" resultClass="java.util.HashMap">
		<![CDATA[
			SELECT person_id,virtual_account,name,nickname,balance,id_number,sex,birthday,local_calls,
				   phone,email,skype,career,recipient,rec_add,rec_num,company_tax_id,updater,update_time
			FROM PERSON
			WHERE 1
		]]>
		<isNotEmpty prepend="AND" property="person_id">
			<![CDATA[ person_id = #person_id#  ]]>
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="con_no">
			<![CDATA[  con_no = #con_no#  ]]>
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="in_con_no" >
				company_tax_id  IN
				<iterate property="in_con_no" conjunction=","  open="(" close=")">
	       		<![CDATA[	#in_con_no[]#	]]>
	     		</iterate>
	     	</isNotEmpty>
		<isNotEmpty prepend="AND" property="con_name">
			<![CDATA[  con_name = #con_name#  ]]>
		</isNotEmpty>
				
		<isNotEmpty property="order">
			<![CDATA[	ORDER BY $order$	]]>
		</isNotEmpty>
		<isNotEmpty property="rowLimit">
			<isNotEmpty prepend="LIMIT" property="fromIndex">
				<![CDATA[ $fromIndex$, $rowLimit$ ]]>
			</isNotEmpty>
			<isEmpty prepend="LIMIT" property="fromIndex">
				<![CDATA[ LIMIT $rowLimit$ ]]>
			</isEmpty>
		</isNotEmpty>
	<!--  	<include refid="limit_offset" /> -->
	</select>
	
	<update id="person_update" parameterClass="com.sing.ren.pojo.Person">
		<![CDATA[
			UPDATE PERSON SET
			name = #name#
		]]>
		<isNotEmpty prepend="," property="virtual_account">
			<![CDATA[ virtual_account = #virtual_account#  ]]>
		</isNotEmpty>
		<isNotEmpty prepend="," property="nickname">
			<![CDATA[  nickname = #nickname#  ]]>
		</isNotEmpty>
		<isNotEmpty prepend="," property="balance">
			<![CDATA[  balance = #balance#  ]]>
		</isNotEmpty>
		<isNotEmpty prepend="," property="id_number">
			<![CDATA[  id_number = #id_number#  ]]>
		</isNotEmpty>
		<isNotEmpty prepend="," property="sex">
			<![CDATA[  sex = #sex#  ]]>
		</isNotEmpty>
		<isNotEmpty prepend="," property="birthday">
			<![CDATA[  birthday = #birthday#  ]]>
		</isNotEmpty>
		<isNotEmpty prepend="," property="local_calls">
			<![CDATA[  local_calls = #local_calls#  ]]>
		</isNotEmpty>
		<isNotEmpty prepend="," property="phone">
			<![CDATA[  phone = #phone#  ]]>
		</isNotEmpty>
		<isNotEmpty prepend="," property="email">
			<![CDATA[  email = #email#  ]]>
		</isNotEmpty>
		<isNotEmpty prepend="," property="skype">
			<![CDATA[  skype = #skype#  ]]>
		</isNotEmpty>
		<isNotEmpty prepend="," property="career">
			<![CDATA[  career = #career#  ]]>
		</isNotEmpty>
		<isNotEmpty prepend="," property="recipient">
			<![CDATA[  recipient = #recipient#  ]]>
		</isNotEmpty>
		<isNotEmpty prepend="," property="rec_add">
			<![CDATA[  rec_add = #rec_add#  ]]>
		</isNotEmpty>
		<isNotEmpty prepend="," property="rec_num">
			<![CDATA[  rec_num = #rec_num#  ]]>
		</isNotEmpty>
		<isNotEmpty prepend="," property="company_tax_id">
			<![CDATA[  company_tax_id = #company_tax_id#  ]]>
		</isNotEmpty>
		<isNotEmpty prepend="," property="updater">
			<![CDATA[  updater = #updater#  ]]>
		</isNotEmpty>
		<isNotEmpty prepend="," property="update_time">
			<![CDATA[  update_time = #update_time#  ]]>
		</isNotEmpty>
		<![CDATA[
			WHERE
				person_id = #person_id#
		]]>
	</update>
	
	<delete id="person_delete" parameterClass="java.util.HashMap">
		<![CDATA[
			DELETE FROM PERSON WHERE person_id = #person_id#
		]]>
	</delete>
</sqlMap>